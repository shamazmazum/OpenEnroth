cmake_minimum_required(VERSION 3.27 FATAL_ERROR)

add_subdirectory(Renderer)

set(ENGINE_GRAPHICS_SOURCES
        BSPModel.cpp
        BspRenderer.cpp
        Camera.cpp
        ClippingFunctions.cpp
        Collisions.cpp
        DecalBuilder.cpp
        FrameLimiter.cpp
        Image.cpp
        ImageLoader.cpp
        Indoor.cpp
        LightmapBuilder.cpp
        LightsStack.cpp
        LocationFunctions.cpp
        Outdoor.cpp
        Overlays.cpp
        PaletteManager.cpp
        ParticleEngine.cpp
        PortalFunctions.cpp
        Sprites.cpp
        TextureFrameTable.cpp
        Texture_MM7.cpp
        TurnBasedOverlay.cpp
        Viewport.cpp
        Vis.cpp
        Weather.cpp)

set(ENGINE_GRAPHICS_HEADERS
        BSPModel.h
        BspRenderer.h
        Camera.h
        ClippingFunctions.h
        Collisions.h
        DecalBuilder.h
        FaceEnums.h
        FrameLimiter.h
        Image.h
        ImageLoader.h
        Indoor.h
        LightmapBuilder.h
        LightsStack.h
        LocationFunctions.h
        LocationInfo.h
        LocationTime.h
        Outdoor.h
        Overlays.h
        PaletteManager.h
        ParticleEngine.h
        Polygon.h
        PortalFunctions.h
        RenderEntities.h
        Sprites.h
        TextureFrameTable.h
        Texture_MM7.h
        TurnBasedOverlay.h
        Viewport.h
        Vis.h
        Weather.h)

add_library(engine_graphics STATIC ${ENGINE_GRAPHICS_SOURCES} ${ENGINE_GRAPHICS_HEADERS})
target_check_style(engine_graphics)

target_link_libraries(engine_graphics
  PUBLIC
  engine
  engine_graphics_renderer
  utility
  library_serialization
  library_color
  library_image
  OpenGL::GL
  ${LuaJit_LDFLAGS}
  ${SOL2_LDFLAGS}
  PRIVATE
  glad
)

target_include_directories(engine_graphics PRIVATE
  ${LuaJit_INCLUDE_DIRS}
  ${SOL2_INCLUDE_DIRS}
  ${GLM_INCLUDE_DIR}
)
